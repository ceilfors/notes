<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Prefer cloud sandbox for serverless architecture | Wisen&#39;s notes</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.0974d01b.css" as="style"><link rel="preload" href="/assets/js/app.1bf79b8d.js" as="script"><link rel="preload" href="/assets/js/2.4d2bddf0.js" as="script"><link rel="preload" href="/assets/js/32.cc108d52.js" as="script"><link rel="prefetch" href="/assets/js/10.3869f9db.js"><link rel="prefetch" href="/assets/js/11.5f6ad96e.js"><link rel="prefetch" href="/assets/js/12.110e25d2.js"><link rel="prefetch" href="/assets/js/13.81562abe.js"><link rel="prefetch" href="/assets/js/14.8bb11894.js"><link rel="prefetch" href="/assets/js/15.d8752aef.js"><link rel="prefetch" href="/assets/js/16.a4119537.js"><link rel="prefetch" href="/assets/js/17.61e782af.js"><link rel="prefetch" href="/assets/js/18.293be17d.js"><link rel="prefetch" href="/assets/js/19.816bbc29.js"><link rel="prefetch" href="/assets/js/20.92831ce2.js"><link rel="prefetch" href="/assets/js/21.b075066f.js"><link rel="prefetch" href="/assets/js/22.7e3936c5.js"><link rel="prefetch" href="/assets/js/23.5d9206d8.js"><link rel="prefetch" href="/assets/js/24.9cf93ec1.js"><link rel="prefetch" href="/assets/js/25.3cee1451.js"><link rel="prefetch" href="/assets/js/26.e8df3af2.js"><link rel="prefetch" href="/assets/js/27.f6de19bf.js"><link rel="prefetch" href="/assets/js/28.a58ddd22.js"><link rel="prefetch" href="/assets/js/29.de44cedc.js"><link rel="prefetch" href="/assets/js/3.6125ccd1.js"><link rel="prefetch" href="/assets/js/30.f463cdfd.js"><link rel="prefetch" href="/assets/js/31.b89a5846.js"><link rel="prefetch" href="/assets/js/33.206592c1.js"><link rel="prefetch" href="/assets/js/34.ee232273.js"><link rel="prefetch" href="/assets/js/35.fb5394f1.js"><link rel="prefetch" href="/assets/js/36.38d197c0.js"><link rel="prefetch" href="/assets/js/37.3d2055cd.js"><link rel="prefetch" href="/assets/js/38.672c3ef6.js"><link rel="prefetch" href="/assets/js/39.12a794ec.js"><link rel="prefetch" href="/assets/js/4.7a6c132a.js"><link rel="prefetch" href="/assets/js/40.19c0dc00.js"><link rel="prefetch" href="/assets/js/41.a88d77fb.js"><link rel="prefetch" href="/assets/js/42.60ca92be.js"><link rel="prefetch" href="/assets/js/43.cd0590a6.js"><link rel="prefetch" href="/assets/js/44.2103bfae.js"><link rel="prefetch" href="/assets/js/45.544bf0a4.js"><link rel="prefetch" href="/assets/js/46.8a62ba89.js"><link rel="prefetch" href="/assets/js/47.3ec5cc4d.js"><link rel="prefetch" href="/assets/js/48.af608913.js"><link rel="prefetch" href="/assets/js/49.3f2dbcdc.js"><link rel="prefetch" href="/assets/js/5.b85d233f.js"><link rel="prefetch" href="/assets/js/50.46f94c99.js"><link rel="prefetch" href="/assets/js/51.2cc133db.js"><link rel="prefetch" href="/assets/js/52.7341517a.js"><link rel="prefetch" href="/assets/js/53.8aaec5ce.js"><link rel="prefetch" href="/assets/js/54.e98a1aa5.js"><link rel="prefetch" href="/assets/js/55.fcfd32ce.js"><link rel="prefetch" href="/assets/js/56.a2e006d1.js"><link rel="prefetch" href="/assets/js/57.0fa57288.js"><link rel="prefetch" href="/assets/js/6.1eabe141.js"><link rel="prefetch" href="/assets/js/7.9ffc98cd.js"><link rel="prefetch" href="/assets/js/8.9d9e4f7e.js"><link rel="prefetch" href="/assets/js/9.13892d5b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0974d01b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Wisen's notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="prefer-cloud-sandbox-for-serverless-architecture"><a href="#prefer-cloud-sandbox-for-serverless-architecture" class="header-anchor">#</a> Prefer cloud sandbox for serverless architecture</h1> <p><a href="./Fake_sandbox.html">Fake sandbox</a> and <a href="./Cloud_sandbox.html">Cloud sandbox</a> comes with their own advantages and disadvantages (<a href="./How_might_we_create_a_sandbox_for_a_cloud_application.html">How might we create a sandbox for a cloud application?</a>). It is difficult to choose an option when there’s no context is given. Given a context that you are building serverless architecture, you should default to the cloud sandbox approach. All of the downsides of cloud sandbox are invalid when you’re building serverless architecture.</p> <p>Here are the downsides of cloud sandbox:</p> <ol><li>Slow sandbox creation given heavy cloud resources</li> <li>High cloud spending given pay per hour model</li> <li>You can’t create the sandbox given no internet connection</li> <li>It’s impossible to induce failure given the services are not fake</li></ol> <p>When you’re building serverless application, you wouldn’t use heavy cloud resources like Amazon EC2 or Amazon RDS. These resources are the ones that are slow to be provisioned. Provisioning AWS Lambda or AWS S3 though, is really quick. The slowness I tend to see is when you create your cloud sandbox for the first time, subsequent update will be faster as you’d only deploy changes. Downside 1 therefore is not valid for serverless architecture.</p> <p>High cloud spending tend to come to resources with pay per hour model, like Amazon EC2 or Amazon RDS. When you are using pay per use services like AWS Lambda though, you tend to pay almost nothing. The services that you’d use on serverless architecture are mostly pay per use services, therefore downside 2 is invalid for serverless architecture.</p> <p>Not having an internet connection is quite a rare use case in my opinion. Unless this is a deal breaker for you, I’d render downside 3 as invalid</p> <p>Even though it’s impossible to induce failures when you’re using a real service, <a href="https://blog.thundra.io/chaos-engineering-with-serverless" target="_blank" rel="noopener noreferrer">it is possible to do them via code<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. As most of the operational complexity of your service is offloaded to the cloud, the need for you to induce failures is also reduced. It is no longer necessary to randomly kill your machines as they will be fully managed by a service like AWS Lambda, for example. For that reason, downside 4 is invalid. Even though it’s possible to inject failures from code, I’d still argue that <a href="./Testing_should_be_the_first-class_citizen_in_the_cloud.html">Testing should be the first-class citizen in the cloud</a>.</p> <hr> <h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <p><a href="https://theburningmonk.com/2019/09/why-you-should-use-temporary-stacks-when-you-do-serverless/" target="_blank" rel="noopener noreferrer">Why you should use temporary stacks when you do serverless | theburningmonk.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p>Instead of spending lots of time to get tools such as  <a href="https://github.com/localstack/localstack" target="_blank" rel="noopener noreferrer">localstack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>  working, I find it much more productive to deploy a temporary CloudFormation stack in AWS and run against the real thing.</p></blockquote> <p><a href="https://blog.thundra.io/chaos-engineering-with-serverless" target="_blank" rel="noopener noreferrer">Chaos Engineering with Serverless<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p>Implementing a Latency Monkey in your system is, at its core, a straightforward addition of an artificial delay to your running code. The very center of any Latency Monkey will be some variation on a sleep command. The key to getting an effective measurement from your system’s failure state is to implement “controllable chaos.”</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1bf79b8d.js" defer></script><script src="/assets/js/2.4d2bddf0.js" defer></script><script src="/assets/js/32.cc108d52.js" defer></script>
  </body>
</html>
